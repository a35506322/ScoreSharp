@model ScoreSharp.RazorTemplate.Mail.SystemErrorLog.SystemErrorLogViewModel
@namespace ScoreSharp.RazorTemplate.SystemErrorLog

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-TW">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Error Notification</title>
  </head>
  <body style="font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f4f4f4; font-size: 12px;">
    <div style="width: 100%; max-width: 1920px; margin: 0 auto; background-color: #ffffff;">
      <div style="background-color: #d32f2f; padding: 20px; color: white; font-weight: bold; text-align: center; font-size: 24px;">
        徵審系統錯誤
      </div>
      <div style="padding: 10px; overflow-x: auto;">
        <table style="width: 100%; border-collapse: collapse; table-layout: fixed;">
          <thead>
            <tr>
              <th style="width: 50px; background-color: #f2f2f2; text-align: left; padding: 5px; font-weight: bold; border: 1px solid #ddd;">SeqNo</th>
              <th style="width: 100px; background-color: #f2f2f2; text-align: left; padding: 5px; font-weight: bold; border: 1px solid #ddd;">ApplyNo</th>
              <th style="max-width: 100px; background-color: #f2f2f2; text-align: left; padding: 5px; font-weight: bold; border: 1px solid #ddd;">Project</th>
              <th style="max-width: 100px; background-color: #f2f2f2; text-align: left; padding: 5px; font-weight: bold; border: 1px solid #ddd;">Source</th>
              <th style="max-width: 100px; background-color: #f2f2f2; text-align: left; padding: 5px; font-weight: bold; border: 1px solid #ddd;">Type</th>
              <th style="background-color: #f2f2f2; text-align: left; padding: 5px; font-weight: bold; border: 1px solid #ddd;">ErrorMessage</th>
              <th style="background-color: #f2f2f2; text-align: left; padding: 5px; font-weight: bold; border: 1px solid #ddd;">ErrorDetail</th>
              <th style="background-color: #f2f2f2; text-align: left; padding: 5px; font-weight: bold; border: 1px solid #ddd;">Request</th>
              <th style="background-color: #f2f2f2; text-align: left; padding: 5px; font-weight: bold; border: 1px solid #ddd;">Response</th>
              <th style="background-color: #f2f2f2; text-align: left; padding: 5px; font-weight: bold; border: 1px solid #ddd;">Note</th>
              <th style="width: 100px; background-color: #f2f2f2; text-align: left; padding: 5px; font-weight: bold; border: 1px solid #ddd;">AddTime</th>
            </tr>
          </thead>
          <tbody>
            @foreach (var item in Model.SystemErrorLogViewModels) 
            {
              <tr style="background-color: #f9f9f9;">
                <td style="padding: 5px; word-break: break-word; vertical-align: top; border: 1px solid #ddd;">@item.SeqNo</td>
                <td style="padding: 5px; word-break: break-word; vertical-align: top; border: 1px solid #ddd;">@item.ApplyNo</td>
                <td style="padding: 5px; word-break: break-word; vertical-align: top; border: 1px solid #ddd;">@item.Project</td>
                <td style="padding: 5px; word-break: break-word; vertical-align: top; border: 1px solid #ddd;">@item.Source</td>
                <td style="padding: 5px; word-break: break-word; vertical-align: top; border: 1px solid #ddd;">@item.Type</td>
                <td style="padding: 5px; word-break: break-word; vertical-align: top; border: 1px solid #ddd;">@item.ErrorMessage</td>
                <td style="border: 1px solid #ddd;">
                  @if (string.IsNullOrEmpty(item.ErrorDetail) == false)
                  {
                    <div style="background-color: #ffebee; color: #d32f2f; padding: 8px; border-left: 4px solid #d32f2f; margin: 0; font-family: monospace; white-space: pre-wrap; font-size: 12px; height: 150px; overflow-y: auto; user-select: all;">
                      @item.ErrorDetail
                    </div>
                  }
                </td>
                <td style="border: 1px solid #ddd;">
                  @if (string.IsNullOrEmpty(item.Request) == false)
                  {
                    <div style="background-color: #ffebee; color: #00a6f4; padding: 8px; border-left: 4px solid #00a6f4; margin: 0; font-family: monospace; white-space: pre-wrap; font-size: 12px; height: 150px;  overflow-y: auto;user-select: all;">
                      @item.Request
                    </div>
                  }
                </td>
                <td style="border: 1px solid #ddd;">
                  @if (string.IsNullOrEmpty(item.Response) == false)
                  {
                    <div style="background-color: #ffebee; color: #00bba7; padding: 8px; border-left: 4px solid #00bba7; margin: 0; font-family: monospace; white-space: pre-wrap; font-size: 12px; height: 150px; overflow-y: auto;user-select: all;">
                      @item.Response
                    </div>
                  }
                </td>
                            <td style="border: 1px solid #ddd;">
                                @if (string.IsNullOrEmpty(item.Note) == false)
                                {
                                    <div style="background-color: #ffebee; color: #8874d8; padding: 8px; border-left: 4px solid #8874d8; margin: 0; font-family: monospace; white-space: pre-wrap; font-size: 12px; height: 150px; overflow-y: auto;user-select: all;">
                                        @item.Note
                                    </div>
                                }
                            </td>
                <td style="padding: 5px; word-break: break-word; vertical-align: top; border: 1px solid #ddd;">@item.AddTime</td>
              </tr>
            }
          </tbody>
        </table>
      </div>
      <div style="background-color: #f2f2f2; padding: 15px; text-align: center; font-size: 12px; color: #666;">
        此為排程信件，請勿回覆。
      </div>
    </div>
  </body>
</html>
