# 修改申請書資料重新發送檢核規則

## 概述

當執行 `UpdateApplicationInfoById` 更新申請書資料後，系統需要判斷是否需要重新執行行內 Mobile 和 Email 檢核。

## 行內 Mobile 檢核

### 觸發條件

- **條件**：正卡人行動電話與原值不同

### 動作

- 前端呼叫 `CheckInternalMobileByApplyNo` API

### 說明

當正卡人的行動電話欄位被修改時，需要重新檢核該行動電話是否與行內其他客戶重複。

---

## 行內 Email 檢核

### 觸發條件

需要呼叫 `CheckInternalEmailByApplyNo` 的情況：

#### 情況 1：正卡人帳單形式為電子帳單，且 EMAIL 有修改

- **條件**：

  - 帳單形式為電子帳單（BillType = 電子帳單）
  - **且** EMAIL 有修改（與原值不同）

- **動作**：前端呼叫 `CheckInternalEmailByApplyNo` API

#### 情況 2：正卡人帳單形式為電子帳單，但更改為其他帳單形式

- **條件**：

  - 原始帳單形式為電子帳單（BillType = 電子帳單）
  - **且** 更改為其他帳單形式（非電子帳單）

- **動作**：前端呼叫 `CheckInternalEmailByApplyNo` API

- **說明**：即使帳單形式變更為非電子帳單，仍需要檢核原本的 Email 是否與行內其他客戶重複。

#### 情況 3：正卡人帳單形式從簡訊帳單變更為電子帳單

- **條件**：

  - 原始帳單形式為簡訊帳單（BillType = 簡訊帳單）
  - **且** 變更為電子帳單（BillType = 電子帳單）

- **動作**：前端呼叫 `CheckInternalEmailByApplyNo` API

- **說明**：變更為電子帳單時，EMAIL 為必填欄位，需要檢核該 Email 是否與行內其他客戶重複。

### 不需要呼叫的情況

#### 情況 4：正卡人帳單形式為簡訊帳單，僅修改 EMAIL

- **條件**：

  - 帳單形式為簡訊帳單（BillType = 簡訊帳單）
  - **且** 僅修改 EMAIL（不變更帳單形式）

- **動作**：**不需要**呼叫 `CheckInternalEmailByApplyNo` API

- **說明**：簡訊帳單不需要 Email 檢核，因此僅修改 Email 時不需要重新檢核。
